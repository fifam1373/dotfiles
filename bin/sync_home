#!/usr/bin/env bash

set -o errexit
set globopt

# findout we have ~/prog or ~/proj
dotfiles_pattern="$HOME/pro[jg]/dotfiles/"
while read -r file; do
    dotfiles_path="$file"
done < <(compgen -G "$dotfiles_pattern" || true)

# copy content of dotfiles to home folder
rsync --exclude ".git/" \
    --exclude "bootstrap.sh" \
    --exclude "install-first.sh" \
    --exclude "README.md" \
    --exclude "help.md" \
    --exclude "vim-cheat.txt" \
    --exclude "emacs-cheat.txt" \
    --exclude "LICENSE" \
    --exclude ".gitignore" \
    -ah --no-perms \
    "$dotfiles_path" "$HOME";

